<!doctype html>
<html>
<head><meta charset="utf-8"><title>Register</title><link rel="stylesheet" href="style.css"></head>
<body>
  <div class="card">
    <h2>Register</h2>
    <form id="regForm">
      <input id="name" placeholder="Name" required>
      <input id="email" type="email" placeholder="Email" required>
      <input id="password" type="password" placeholder="Password" required>
      <button class="btn" type="submit">Register</button>
    </form>
    <div class="small">Already have an account? <a href="login.html">Login</a></div>
  </div>
<script>
document.getElementById('regForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const name = document.getElementById('name').value.trim();
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value;
  try {
    const res = await fetch('/api/auth/register', {
      method: 'POST', headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ name, email, password })
    });
    if(res.ok) {
      alert('✅ Registered successfully');
      window.location = 'login.html';
    } else {
      const data = await res.json().catch(()=>({}));
      alert('❌ Registration failed. ' + (data.message||''));
    }
  } catch(err){ alert('❌ Registration error'); }
});
</script>
</body>
</html>
